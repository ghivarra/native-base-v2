{"version":3,"sources":["../../../src/basic/Accordion.js"],"names":["styles","StyleSheet","create","defaultHeader","flexDirection","padding","variable","accordionContentPadding","justifyContent","alignItems","DefaultHeader","props","disable","expanded","expandedIcon","expandedIconStyle","headerStyle","icon","iconStyle","title","theme","variables","backgroundColor","color","disableRow","fontSize","accordionIconFontSize","React","PureComponent","DefaultContent","content","contentStyle","AccordionSubItem","state","fadeAnim","Animated","Value","timing","toValue","duration","useNativeDriver","start","children","style","opacity","AccordionItem","index","item","onAccordionClose","onAccordionOpen","renderContent","renderHeader","setSelected","Accordion","expandMultiple","selected","undefined","Array","isArray","slice","dataArray","borderColor","accordionBorderColor","borderWidth","_","String","includes","i","indexOf","splice","setState"],"mappings":"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","file":"Accordion.js","sourcesContent":["/* eslint-disable react/prefer-stateless-function */\n/* eslint-disable react/forbid-prop-types */\nimport React from 'react';\nimport {\n  Animated,\n  TouchableWithoutFeedback,\n  FlatList,\n  StyleSheet,\n  View\n} from 'react-native';\nimport { Text } from './Text';\nimport { Icon } from './Icon';\nimport variable from '../theme/variables/platform';\n\nconst styles = StyleSheet.create({\n  defaultHeader: {\n    flexDirection: 'row',\n    padding: variable.accordionContentPadding,\n    justifyContent: 'space-between',\n    alignItems: 'center'\n  }\n});\n\nclass DefaultHeader extends React.PureComponent {\n  render() {\n    const {\n      disable,\n      expanded,\n      expandedIcon,\n      expandedIconStyle,\n      headerStyle,\n      icon,\n      iconStyle,\n      title,\n      theme\n    } = this.props;\n    \n    const variables = (theme && theme['@@shoutem.theme/themeStyle'] && theme['@@shoutem.theme/themeStyle'].variables) ? theme['@@shoutem.theme/themeStyle'].variables.variables : variable;\n\n    return (\n      <View\n        style={[\n          styles.defaultHeader,\n          headerStyle || { backgroundColor: variables.headerStyle }\n        ]}\n      >\n        <Text style={{ color: disable ? variable.disableRow : null }}>\n          {title}\n        </Text>\n        <Icon\n          style={[\n            { fontSize: variables.accordionIconFontSize },\n            expanded\n              ? expandedIcon && expandedIconStyle\n                ? expandedIconStyle\n                : { color: variables.expandedIconStyle }\n              : icon && iconStyle\n              ? iconStyle\n              : { color: disable ? variable.disableRow : variables.iconStyle }\n          ]}\n          name={\n            expanded ? expandedIcon || 'ios-arrow-up' : icon || 'ios-arrow-down'\n          }\n        />\n      </View>\n    );\n  }\n}\n\nclass DefaultContent extends React.PureComponent {\n  render() {\n    const { content, contentStyle, theme } = this.props;\n    const variables = (theme && theme['@@shoutem.theme/themeStyle'] && theme['@@shoutem.theme/themeStyle'].variables) ? theme['@@shoutem.theme/themeStyle'].variables.variables : variable;\n\n    return (\n      <Text\n        style={[\n          { padding: variable.accordionContentPadding },\n          contentStyle || { backgroundColor: variables.contentStyle }\n        ]}\n      >\n        {content}\n      </Text>\n    );\n  }\n}\n\nclass AccordionSubItem extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fadeAnim: new Animated.Value(0.3)\n    };\n  }\n\n  componentDidMount() {\n    Animated.timing(this.state.fadeAnim, {\n      toValue: 1,\n      duration: 500,\n      useNativeDriver: true\n    }).start();\n  }\n\n  render() {\n    const { children, style } = this.props;\n    const { fadeAnim } = this.state;\n\n    return (\n      <Animated.View style={[style, { opacity: fadeAnim }]}>\n        {children}\n      </Animated.View>\n    );\n  }\n}\n\nclass AccordionItem extends React.PureComponent {\n  render() {\n    const {\n      contentStyle,\n      disable,\n      expanded,\n      expandedIcon,\n      expandedIconStyle,\n      headerStyle,\n      icon,\n      iconStyle,\n      index,\n      item,\n      onAccordionClose,\n      onAccordionOpen,\n      renderContent,\n      renderHeader,\n      setSelected,\n      theme\n    } = this.props;\n\n    return (\n      <View>\n        <TouchableWithoutFeedback\n          disabled={disable}\n          onPress={() => {\n            onAccordionOpen && !expanded && onAccordionOpen(item, index);\n            onAccordionClose && expanded && onAccordionClose(item, index);\n            setSelected(index);\n          }}\n        >\n          <View>\n            {renderHeader ? (\n              renderHeader(item, expanded, index)\n            ) : (\n              <DefaultHeader\n                disable={disable}\n                expanded={expanded}\n                headerStyle={headerStyle}\n                icon={icon}\n                iconStyle={iconStyle}\n                expandedIcon={expandedIcon}\n                expandedIconStyle={expandedIconStyle}\n                title={item.title}\n                theme={theme}\n              />\n            )}\n          </View>\n        </TouchableWithoutFeedback>\n        {expanded ? (\n          <AccordionSubItem>\n            {renderContent ? (\n              renderContent(item, index)\n            ) : (\n              <DefaultContent\n                content={item.content}\n                contentStyle={contentStyle}\n                theme={theme}\n              />\n            )}\n          </AccordionSubItem>\n        ) : null}\n      </View>\n    );\n  }\n}\n\nexport class Accordion extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    const { expanded, expandMultiple } = props;\n    let selected = [];\n\n    if (expanded !== undefined && expanded !== null) {\n      selected = Array.isArray(expanded) ? expanded : [expanded];\n      selected = expandMultiple ? selected : selected.slice(0, 1);\n    }\n\n    this.state = {\n      selected\n    };\n  }\n\n  setSelected = index => {\n    const { expandMultiple } = this.props;\n    const selected = [...this.state.selected];\n\n    const i = selected.indexOf(index);\n    if (i !== -1) {\n      selected.splice(i, 1);\n      this.setState({ selected });\n    } else {\n      this.setState({ selected: expandMultiple ? [...selected, index] : [index] });\n    }\n  };\n\n  render() {\n    const {\n      contentStyle,\n      dataArray,\n      disable,\n      expandedIcon,\n      expandedIconStyle,\n      headerStyle,\n      icon,\n      iconStyle,\n      onAccordionClose,\n      onAccordionOpen,\n      renderContent,\n      renderHeader,\n      style,\n      theme\n    } = this.props;\n\n    const variables = (theme && theme['@@shoutem.theme/themeStyle'] && theme['@@shoutem.theme/themeStyle'].variables) ? theme['@@shoutem.theme/themeStyle'].variables.variables : variable;\n\n    return (\n      <FlatList\n        data={dataArray}\n        extraData={this.state}\n        style={[\n          {\n            borderColor: variables.accordionBorderColor,\n            borderWidth: variables.borderWidth\n          },\n          style\n        ]}\n        keyExtractor={(_, index) => String(index)}\n        renderItem={({ item, index }) => (\n          <AccordionItem\n            disable={disable === index}\n            item={item}\n            expanded={this.state.selected.includes(index)}\n            index={index}\n            setSelected={this.setSelected}\n            headerStyle={headerStyle}\n            contentStyle={contentStyle}\n            renderHeader={renderHeader}\n            renderContent={renderContent}\n            icon={icon}\n            iconStyle={iconStyle}\n            expandedIcon={expandedIcon}\n            expandedIconStyle={expandedIconStyle}\n            onAccordionOpen={onAccordionOpen}\n            onAccordionClose={onAccordionClose}\n            theme={theme}\n          />\n        )}\n      />\n    );\n  }\n}\n"]}